(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),o=(a(15),a(1)),c=a(2),l=a(5),h=a(3),u=a(4),p=(a(16),a(17),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Business"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{src:this.props.business.imageSrc,alt:""})),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.business.url},r.a.createElement("h2",null,this.props.business.name)),r.a.createElement("div",{className:"Business-information"},r.a.createElement("div",{className:"Business-address"},r.a.createElement("p",null,this.props.business.address),r.a.createElement("p",null,this.props.business.city),r.a.createElement("p",null,this.props.business.zipCode),r.a.createElement("p",null,"Tel: ",this.props.business.phone)),r.a.createElement("div",{className:"Business-reviews"},r.a.createElement("h3",null,this.props.business.category),r.a.createElement("h3",{className:"rating"},this.props.business.rating),r.a.createElement("p",null,this.props.business.reviewCount))))}}]),t}(r.a.Component)),d=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.isLoading)return r.a.createElement("div",{className:"loading-container"},r.a.createElement("div",{className:"loading-text"},"Loading results"),r.a.createElement("div",{className:"loader"}));if(this.props.errors)return r.a.createElement("h3",{id:"noResults"},this.props.errors.description||"Couldn't perform the search. Please check your internet connection then reload the page");var e=this.props.businesses.map(function(e){return console.log(e),r.a.createElement(p,{key:e.id,business:e})});return r.a.createElement("div",{className:"BusinessList"},e)}}]),t}(r.a.Component),m=a(6),b=(a(18),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).handleClearSearch=function(){a.props.handleClearErrState(),a.setState({term:"",location:""}),a.searchInputRef.current.focus()},a.searchInputRef=r.a.createRef(),a.state={term:"",location:"",sortBy:"best_match"},a.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewd":"review_count"},a.handleLocationChange=a.handleLocationChange.bind(Object(m.a)(a)),a.handleTermChange=a.handleTermChange.bind(Object(m.a)(a)),a.handleSortByChange=a.handleSortByChange.bind(Object(m.a)(a)),a.handleSearch=a.handleSearch.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getSortByClass",value:function(e){return this.state.sortBy===e?"active":""}},{key:"handleSortByChange",value:function(e){this.setState({sortBy:e})}},{key:"handleTermChange",value:function(e){return this.props.handleClearErrState(),this.setState({term:e.target.value})}},{key:"handleLocationChange",value:function(e){return this.props.handleClearErrState(),this.setState({location:e.target.value})}},{key:"handleSearch",value:function(e){return e.preventDefault(),"rating"===this.state.sortBy?this.props.searchYelpAndSortByRating(this.state.term,this.state.location,this.state.sortBy):this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(this.sortByOptions).map(function(t){var a=e.sortByOptions[t];return r.a.createElement("li",{key:a,className:e.getSortByClass(a),onClick:e.handleSortByChange.bind(e,a)},t)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("div",{className:"SearchBar-sort-options"},r.a.createElement("ul",null,this.renderSortByOptions())),r.a.createElement("form",{onSubmit:this.handleSearch},r.a.createElement("div",{className:"SearchBar-fields"},r.a.createElement("input",{ref:this.searchInputRef,placeholder:"Search Businesses",value:this.state.term,onChange:this.handleTermChange,required:!0}),r.a.createElement("input",{placeholder:"Where?",value:this.state.location,onChange:this.handleLocationChange,required:!0})),r.a.createElement("div",{className:"SearchBar-submit"},r.a.createElement("button",null,"Let's Go"))),r.a.createElement("div",{className:"ClearSearch"},r.a.createElement("button",{onClick:this.handleClearSearch},"Clear")))}}]),t}(r.a.Component)),f=(a(19),{search:function(e,t,a){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a),{headers:{Authorization:"Bearer ".concat("BozTpPOm5HYywLTElRtpHTZiMnymyMLlavcBG4OeNNxJLpmp9jH0mQRzv-L0IXHBSahnwXQGLD9I_KnUJtz8sO7SBN9jLp2O-q_LGAJexGhvQLKpR5W0IaRQFrlAXXYx")}}).then(function(e){return e.json()}).then(function(e){if(e.businesses){if(0!==e.businesses.length)return e.businesses.map(function(e){return{id:e.id,imageSrc:e.image_url,url:e.url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count,phone:e.phone}});throw{description:"Didn't find any results for the specified term. Try to perform the search by using valid names/terms"}}if(e.error)throw e.error})}}),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).searchYelp=function(e,t,n){a.setState({businesses:[],errors:null,isLoading:!0}),f.search(e,t,n).then(function(e){return a.setState({businesses:e,isLoading:!1})}).catch(function(e){return a.setState({errors:e,isLoading:!1})})},a.searchYelpAndSortByRating=function(e,t,n){a.setState({businesses:[],errors:null,isLoading:!0}),f.search(e,t,n).then(function(e){var t=e.sort(function(e,t){return t.rating-e.rating});return a.setState({businesses:t,isLoading:!1})}).catch(function(e){return a.setState({errors:e,isLoading:!1})})},a.handleClearErrState=function(){a.setState({errors:null})},a.state={businesses:[],errors:null,isLoading:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"ravenous"),r.a.createElement(b,{searchYelp:this.searchYelp,searchYelpAndSortByRating:this.searchYelpAndSortByRating,handleClearErrState:this.handleClearErrState}),r.a.createElement(d,{businesses:this.state.businesses,errors:this.state.errors,isLoading:this.state.isLoading}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.f434497d.chunk.js.map